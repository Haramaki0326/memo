# 一覧

## ファイルの圧縮・復元・閲覧

| 圧縮  | 復元    | 閲覧  |
| ----- | ------- | ----- |
| gzip  | gunzip  | zcat  |
| bzip2 | bunzip2 | bzcat |
| xz    | xz -d   | xzcat |

## アーカイブの作成・展開

アーカイブ：複数のファイルをまとめたファイルのこと
ディレクトリ単位で圧縮を行う場合はまずディレクトリのアーカイブを作る必要がある

## `tar`

```sh
tar [オプション] ファイル名あるいはディレクトリ名
```

- ファイルやディレクトリを１つのアーカイブファイルにまとめる
- それを展開する
- `z`オプションを付けると、`gzip`による圧縮/展開を行う
- `j`オプションを付けると、`bzip2`による圧縮/展開を行う
- `tar`コマンドのオプションでは`-`を省略することができる

### 基本コマンド

#### ファイルのアーカイブを作成し gzip 形式で圧縮する

```sh
tar -czvf アーカイブ.tgz 対象ファイル
```

#### gzip で圧縮されたアーカイブを展開する

```sh
tar -xzvf アーカイブ.tgz
```

### オプション

● 操作オプション
|短いオプション|長いオプション|意味|
| ----- | ------- | ----- |
|-c|--create|新しいアーカイブを作成する|
|-r|--append|アーカイブの最後にファイルを追加する|
|-A|--catenate<br>--concatenate|アーカイブに tar アーカイブを追加する|
|-u|--update|アーカイブのファイルを更新する（アーカイブ内の同名ファイルより新しいものだけを追加する）|
|-d|--diff<br>--compare|アーカイブとファイルシステムを比較する|
||--delete|アーカイブから削除する|
|-t|--list|アーカイブの内容の一覧を表示する|
|-x|--extract,--get|アーカイブからファイルを抽出する|
||

#### 共通オプション

| 短いオプション     | 長いオプション                                                                                                                                           | 意味                                                                                                             |
| ------------------ | -------------------------------------------------------------------------------------------------------------------------------------------------------- | ---------------------------------------------------------------------------------------------------------------- |
| -f アーカイブ      | --file=アーカイブ                                                                                                                                        | アーカイブファイル名を指定する                                                                                   |
| -C ディレクトリ    | --directory=ディレクトリ                                                                                                                                 | カレントディレクトリを指定したディレクトリに変更してから実行する                                                 |
| --recursion        | ディレクトリを再帰的に処理する（デフォルト）                                                                                                             |
| -h                 | --dereference                                                                                                                                            | シンボリックリンクをたどる                                                                                       |
| --hard-dereference | ハードリンクをたどる                                                                                                                                     |
| -N 日付            | --newer=日付,                                                                                                                                            |
| --after-date=日付  | 指定した日付より新しいファイルだけを保存する（日付の代わりにファイルを指定することも可能。この場合、指定したファイルより新しいファイルだけが対象になる） |
| -P                 | --absolute-names                                                                                                                                         | ファイル名から先頭の「/」を取り除かない                                                                          |
| -p                 | --preserve-permissions                                                                                                                                   | 所有者などのファイル属性を保持する（スーパーユーザーのデフォルト）                                               |
| -k                 | --keep-old-files                                                                                                                                         | 既存のファイルを置き換えない                                                                                     |
| --keep-newer-files | アーカイブより新しい場合は既存ファイルを置き換えない                                                                                                     |
| --overwrite        | 既存のファイルを上書きする                                                                                                                               |
| -U                 | --unlink-first                                                                                                                                           | ファイルを上書きする前に削除する                                                                                 |
| --recursive-unlink | ディレクトリを展開する際、いったん既存ディレクトリを空にする                                                                                             |
| --suffix=接尾辞    | バックアップの接尾辞を指定する（環境変数「SIMPLE_BACKUP_SUFFIX」より優先する。どちらも指定されていない場合は「~」を使用する）                            |
| --remove-files     | アーカイブへ追加した後にファイルを削除する                                                                                                               |
| -T ファイル        | --files-from=ファイル                                                                                                                                    | 対象とするファイル名を指定したファイルから読み込む                                                               |
| --unquote          | 「-T」で読み込んだファイル名の引用符を外す（デフォルト）                                                                                                 |
| -X ファイル        | --exclude-from=ファイル                                                                                                                                  | 除外するファイル名をファイルから読み込む                                                                         |
| -z                 | --gzip                                                                                                                                                   | アーカイブを gzip 形式で圧縮する、gzip 形式で圧縮されたアーカイブを展開する（拡張子は「.tar.gz」または「.tgz」） |
| -j                 | --bzip2                                                                                                                                                  | アーカイブを bzip2 形式で圧縮する、bzip2 形式で圧縮されたアーカイブを展開する（拡張子は.tar.bz2）                |
| -Z                 | --compress,                                                                                                                                              |
| --uncompress       | アーカイブを compress 形式で圧縮する、compress 形式で圧縮されたアーカイブを展開する（拡張子は「.tar.Z」）                                                |
| -W                 | --verify                                                                                                                                                 | アーカイブを書き出した後に検証する                                                                               |
| -v                 | --verbose                                                                                                                                                | 処理したファイルを詳しく出力する                                                                                 |

## `cpio`

## `dd`
